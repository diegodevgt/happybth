{"version":3,"sources":["views/pages/account/NewPassword.jsx"],"names":["NewPassword","props","addToast","useToasts","useState","current_password","new_password","new_confirm_password","form","setForm","handleChangeForm","e","target","id","value","form_object","JSON","parse","stringify","new_form","className","sm","htmlFor","onChange","type","placeholder","required","name","block","color","onClick","user_object","reactLocalStorage","getObject","console","log","token","error","labels","Object","entries","key","length","appearance","autoDismiss","autoDismissTimeout","axios","method","url","data","headers","then","result","setTimeout","response"],"mappings":"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","file":"static/js/25.3a3b274e.chunk.js","sourcesContent":["import React, { lazy, Fragment, useState, useEffect, useRef} from 'react'\r\nimport axios from 'axios'\r\nimport {\r\n    CButton,\r\n    CCol,\r\n    CRow,\r\n    CFormGroup,\r\n    CLabel,\r\n    CInput,\r\n  } from '@coreui/react'\r\n  import { useToasts } from 'react-toast-notifications';\r\n  import {reactLocalStorage} from 'reactjs-localstorage';\r\n\r\nfunction NewPassword(props) {\r\n    const { addToast } = useToasts();\r\n    const [form, setForm] = useState({\r\n        current_password: \"\",\r\n        new_password: \"\",\r\n        new_confirm_password: \"\",\r\n    });\r\n\r\n    const handleChangeForm = (e) =>{\r\n        const {id, value} = e.target;\r\n        const form_object = JSON.parse(JSON.stringify(form));\r\n        let new_form = {\r\n            ...form_object,\r\n            [id]: value\r\n        };\r\n        setForm(new_form);\r\n    }\r\n\r\n    const onSubmit = () =>{\r\n        const user_object = reactLocalStorage.getObject('user');\r\n        console.log(`Bearer ${user_object.token}`);\r\n        let error = false;\r\n        let labels = {\r\n            current_password: \"Contraseña Actual\",\r\n            new_password: \"Nueva Contraseña\",\r\n            new_confirm_password: \"Confirmar Nueva Contraseña\",\r\n        };\r\n\r\n        for (const [key, value] of Object.entries(form)) {\r\n            if(value.length === 0){\r\n                addToast(`El campo ${labels[key]} es requerido`, { \r\n                    appearance: 'error', \r\n                    autoDismiss : true ,\r\n                    autoDismissTimeout : 4000\r\n                });\r\n                error = true;\r\n            }\r\n        }\r\n\r\n        if(form.new_password !== form.new_confirm_password){\r\n            addToast(`Las contraseñas no coinciden`, { \r\n                appearance: 'error', \r\n                autoDismiss : true ,\r\n                autoDismissTimeout : 4000\r\n            });\r\n            error = true;\r\n        }\r\n\r\n\r\n        if(!error){\r\n            axios({\r\n                method: 'post',\r\n                url: 'https://ws.conectaguate.com/api/v1/site/usuario/resetpassword',\r\n                data: form,\r\n                headers: { \r\n                    'Authorization': `Bearer ${user_object.token}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n              }).then(\r\n                (result) => {\r\n                  console.log(result);\r\n                    addToast(`Tu contraseña ha sido actualizada`, { \r\n                        appearance: 'success', \r\n                        autoDismiss : true ,\r\n                        autoDismissTimeout : 4000\r\n                    });\r\n                    setTimeout(function(){ \r\n                        setForm({\r\n                            current_password: \"\",\r\n                            new_password: \"\",\r\n                            new_confirm_password: \"\",\r\n                        });\r\n                    }, 1000);\r\n                },\r\n                (error) => {\r\n                  if (error.response) {\r\n                    console.log(error.response);\r\n                    addToast(`La contraseña debe contener 8 caracteres`, { \r\n                        appearance: 'error', \r\n                        autoDismiss : true ,\r\n                        autoDismissTimeout : 4000\r\n                    });\r\n                    setTimeout(function(){ \r\n                        setForm({\r\n                            current_password: \"\",\r\n                            new_password: \"\",\r\n                            new_confirm_password: \"\",\r\n                        });\r\n                    }, 1000);\r\n                  }\r\n                }\r\n              );\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>  \r\n            <div className=\"profile-container\">\r\n                <CRow>\r\n                    <CCol sm=\"12\">\r\n                        <div className=\"profile-title\">\r\n                            <h2>Cambio de contraseña</h2>\r\n                        </div>\r\n                    </CCol>\r\n                </CRow>\r\n                <CRow>\r\n                    <CCol sm=\"12\">\r\n                        <CFormGroup>\r\n                            <CLabel htmlFor=\"current_password\">Contraseña Actual</CLabel>\r\n                            <CInput onChange={handleChangeForm} value={form.current_password} id=\"current_password\" type=\"password\" placeholder=\"\" required />\r\n                        </CFormGroup>\r\n                    </CCol>\r\n                </CRow>\r\n                <CRow>\r\n                    <CCol sm=\"12\">\r\n                        <CFormGroup>\r\n                            <CLabel htmlFor=\"new_password\">Nueva Contraseña</CLabel>\r\n                            <CInput onChange={handleChangeForm} value={form.new_password} id=\"new_password\" type=\"password\" placeholder=\"\" required />\r\n                        </CFormGroup>\r\n                    </CCol>\r\n                </CRow>\r\n                <CRow>\r\n                    <CCol sm=\"12\">\r\n                        <CFormGroup>\r\n                            <CLabel htmlFor=\"new_confirm_password\">Confirmar Nueva Contraseña</CLabel>\r\n                            <CInput onChange={handleChangeForm} value={form.new_confirm_password} id=\"new_confirm_password\" type=\"password\" placeholder=\"\" required />\r\n                        </CFormGroup>\r\n                    </CCol>\r\n                </CRow>\r\n                <CRow>\r\n                    <CCol sm=\"6\">\r\n                        \r\n                    </CCol>\r\n                    <CCol sm=\"6\">\r\n                        <CRow>\r\n                            <CCol sm=\"6\" className=\"mb-3 mb-xl-0\">\r\n                                <CButton name=\"cancelar\" block color=\"secondary\">Cancelar</CButton>\r\n                            </CCol>\r\n                            <CCol sm=\"6\" className=\"mb-3 mb-xl-0\">\r\n                                <CButton \r\n                                onClick={onSubmit}\r\n                                name=\"guardar\" block color=\"info\">Actualizar</CButton>\r\n                            </CCol>\r\n                        </CRow>\r\n                    </CCol>\r\n                </CRow>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\n\r\nexport default NewPassword\r\n\r\n"],"sourceRoot":""}