(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[28],{1063:function(e,t,a){"use strict";a.r(t);var n=a(84),c=a(702),i=a(1),r=a(784),o=a(66),s=(a(188),a(706)),l=a.n(s),d=a(28),u=a(962),b=(a(984),a(985),a(986),a(59),a(988)),j=a.n(b),f=(a(987),a(212)),h=a(213),m=a(214),p=a(216),O=a(215),g=a(14),v=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).btnClickedHandler=n.btnClickedHandler.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"btnClickedHandler",value:function(){this.props.clicked(this.props.value)}},{key:"render",value:function(){return Object(g.jsx)(o.A,{name:"cil-file",onClick:this.btnClickedHandler,src:"img/icons/mis-envios/guia.svg",fluid:!0,style:{width:"40px",cursor:"pointer"}})}}]),a}(i.Component),x=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).btnClickedHandler=n.btnClickedHandler.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"btnClickedHandler",value:function(){this.props.clicked(this.props.value)}},{key:"render",value:function(){return Object(g.jsx)(o.A,{name:"cil-action-undo",onClick:this.btnClickedHandler,src:"img/icons/mis-envios/exportar.svg",fluid:!0,style:{width:"40px",cursor:"pointer",marginLeft:"auto",marginRight:"auto",display:"block"}})}}]),a}(i.Component),k=function(e){Object(p.a)(a,e);var t=Object(O.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).btnClickedHandler=n.btnClickedHandler.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"btnClickedHandler",value:function(){this.props.clicked(this.props.value)}},{key:"render",value:function(){var e="",t="";switch(this.props.value){case"Cancelado":case"Devolucion":e="#e67e22",t="#ffffff";break;case"Liquidado":e="#3498db",t="#ffffff";break;case"Recibido":case"Creado":e="#bdc3c7",t="#000000";break;case"Almacen":e="#9b59b6",t="#ffffff";break;case"Transito":e="#f1c40f",t="#ffffff";break;case"Completada":e="#2ecc71",t="#ffffff"}return Object(g.jsx)("div",{style:{display:"block",marginLeft:"auto",marginRight:"auto",marginTop:".5rem"},children:Object(g.jsx)("p",{style:{background:e,color:t,textAlign:"center",display:"block",marginLeft:"auto",marginRight:"auto",width:"fit-content",paddingLeft:".3rem",paddingRight:".3rem",paddingBottom:".05rem",paddingTop:".05rem",borderRadius:"15px",lineHeight:"30px"},children:this.props.value})})}}]),a}(i.Component),w=a(710);t.default=function(e){var t=function(){var e=Object(i.useState)({width:void 0,height:void 0}),t=Object(c.a)(e,2),a=t[0],n=t[1];return Object(i.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),a=Object(d.g)(),s=Object(i.useState)("20"),b=Object(c.a)(s,2),f=b[0],h=b[1],m=Object(i.useState)(null),p=Object(c.a)(m,2),O=p[0],y=p[1],C=Object(i.useState)(!1),D=Object(c.a)(C,2),N=D[0],_=D[1],R=Object(i.useState)(new Date),S=Object(c.a)(R,2),A=S[0],E=S[1],z=Object(i.useState)(new Date),H=Object(c.a)(z,2),L=H[0],B=H[1],F=Object(i.useState)(""),P=Object(c.a)(F,2),M=P[0],T=P[1],W=Object(i.useState)({}),G=Object(c.a)(W,2),I=(G[0],G[1]),J=Object(i.useState)(null),q=Object(c.a)(J,2),Q=q[0],U=q[1],Y=Object(i.useState)(null),K=Object(c.a)(Y,2),V=K[0],X=K[1],Z=Object(i.useState)(null),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ae=Object(i.useState)({columnDefs:[{headerName:"Pedido",field:"pedido"},{headerName:"Destinatario",field:"destinatario"},{headerName:"Destino",field:"destino"},{headerName:"Tipo de envio",field:"tipo_de_envio"},{headerName:"Creaci\xf3n",field:"fecha_creacion"},{headerName:"Entrega",field:"fecha_entrega"},{headerName:"Estado",field:"estado",cellRenderer:"idBtnCellRenderer",cellRendererParams:{clicked:function(e){alert("".concat(e," was clicked"))}}},{haederName:"",field:"Descargar",cellRenderer:"btnCellRendererDescargar",cellRendererParams:{clicked:function(e){var t=window.location,a=t.protocol+"//"+t.host+"/"+t.pathname.split("/")[1];e="".concat(a,"#/tracking/").concat(e),window.open(e,"_blank").focus()}}},{haederName:"",field:"link",cellRenderer:"btnCellRenderer",cellRendererParams:{clicked:function(e){var t=window.location,a=t.protocol+"//"+t.host+"/"+t.pathname.split("/")[1];e="".concat(a,"#/tracking/").concat(e),window.open(e,"_blank").focus()}}}],rowData:[],defaultColDef:{resizable:!0}}),ne=Object(c.a)(ae,2),ce=ne[0],ie=ne[1];Object(i.useEffect)((function(){ie(Object(n.a)({},ce)),_(!0)}),[]),Object(i.useEffect)((function(){var e=w.reactLocalStorage.getObject("user");if("undefined"===e||void 0===e||null===e||0===Object.keys(e).length)return w.reactLocalStorage.remove("user"),I({}),a.push("/login"),!1;var t="https://ws.conectaguate.com/api",n=new Promise((function(a,n){return l()({method:"get",url:t+"/v1/site/transportes",headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){return a({key:"transportes",data:e.data.Data},"transportes")}))})),c=new Promise((function(a,n){return l()({method:"get",url:t+"/v1/site/estatus",headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){return a({key:"estatus",data:e.data.Data},"estatus")}))})),i=new Promise((function(a,n){return l()({method:"get",url:t+"/v1/site/tipopago",headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(e){return a({key:"tipos_de_pago",data:e.data.Data},"tipos_de_pago")}))}));Promise.all([n,c,i]).then((function(e){e.forEach((function(e){var t={};switch(e.key){case"transportes":e.data.forEach((function(e){t[e.id]=e})),U(t);break;case"estatus":e.data.forEach((function(e){t[e.id]=e})),X(t);break;case"tipos_de_pago":e.data.forEach((function(e){t[e.id]=e})),te(t)}})),console.log(e)}))}),[]);var re=function(){O.api.setQuickFilter(document.getElementById("guia").value)};return Object(i.useEffect)((function(){if(null!==Q&&null!==V&&null!==ee){var e=w.reactLocalStorage.getObject("user"),t="";console.log(e),"undefined"===e||void 0===e||null===e||0===Object.keys(e).length?(w.reactLocalStorage.remove("user"),a.push("/login")):t="Bearer ".concat(e.token);var c={headers:{Authorization:t}};l.a.get("https://ws.conectaguate.com/api/v1/site/user/pedidos/",c).then((function(e){var t=[],a=e.data.Data;a.forEach((function(e){if(console.log(e),e.created_at){var a=new Date(e.created_at),n=a.getFullYear(),c=a.getMonth()+1,i=a.getDate();i<10&&(i="0"+i),c<10&&(c="0"+c),e.fecha_creacion=i+"/"+c+"/"+n}var r={pedido:e.id,destinatario:e.nombre_destino,destino:e.direccion_destino,tipo_de_envio:ee[e.tipo_pago].nombre,estado:e.status,link:e.guia,fecha_creacion:e.fecha_creacion,date_created:e.created_at,fecha_entrega:""};t.push(r)})),ie(Object(n.a)(Object(n.a)({},ce),{},{rowData:t,rowDataWithoutFilter:t}))}))}}),[Q,V,ee]),N?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"mis-envios-container",children:[Object(g.jsx)(o.O,{children:Object(g.jsx)(o.j,{sm:"12",children:Object(g.jsx)(o.f,{className:"card-header",children:Object(g.jsx)("div",{className:"mis-envios-title",children:"Monitorea tus pedidos"})})})}),Object(g.jsxs)(o.O,{className:"filter-container",children:[Object(g.jsxs)(o.j,{sm:"3",className:"filter-row-responsive",children:[Object(g.jsx)(o.O,{children:"No. de Gu\xeda"}),Object(g.jsx)(o.O,{children:Object(g.jsx)(o.B,{type:"text",id:"guia",className:"filter-container-input",value:M,placeholder:"",style:{background:"white",border:"0px"},onChange:function(e){var t=e.target,a=(t.name,t.value);T(a),re()}})})]}),Object(g.jsxs)(o.j,{sm:"3",className:"filter-row-responsive",children:[Object(g.jsx)(o.O,{children:"Inicio"}),Object(g.jsx)(o.O,{children:Object(g.jsx)(j.a,{selected:A,id:"fecha-ini",className:"filter-container-input form-control",onChange:function(e){console.log(e),E(e)},style:{background:"white",border:"0px",textAlign:"left"},maxDate:L,dateFormat:"dd/MM/yyyy"})})]}),Object(g.jsxs)(o.j,{sm:"3",className:"filter-row-responsive",children:[Object(g.jsx)(o.O,{children:"Finalizaci\xf3n"}),Object(g.jsx)(o.O,{children:Object(g.jsx)(j.a,{selected:L,id:"fecha-fin",className:"filter-container-input form-control",onChange:function(e){console.log(e),B(e)},style:{background:"white",border:"0px",textAlign:"left"},minDate:A,dateFormat:"dd/MM/yyyy"})})]}),Object(g.jsxs)(o.j,{sm:"3",children:[Object(g.jsx)(o.O,{children:"\xa0"}),Object(g.jsxs)(o.O,{className:"row_button_filters",children:[Object(g.jsx)(o.j,{col:"6",sm:"12",md:"12",xl:!0,className:"mb-3 mb-xl-0",children:Object(g.jsx)(o.e,{block:!0,className:"button_filters",style:{background:"#f3bf34",fontWeight:"500"},onClick:function(){var e=ce.rowDataWithoutFilter.filter((function(e){var t=new Date(A),a=new Date(L),n=new Date(e.date_created);if(n>t&&n<a)return!0}));ie(Object(n.a)(Object(n.a)({},ce),{},{rowData:e}))},children:Object(g.jsxs)(o.O,{children:[Object(g.jsx)(o.j,{sm:"3",children:Object(g.jsx)(o.A,{src:"img/icons/mis-envios/buscar.svg",fluid:!0,style:{width:"25px",cursor:"pointer"}})}),Object(g.jsx)(o.j,{className:"export_button",children:"Aplicar"})]})})}),Object(g.jsx)(o.j,{col:"6",sm:"12",md:"12",xl:!0,className:"mb-3 mb-xl-0",children:Object(g.jsx)(o.e,{block:!0,className:"button_filters",style:{background:"#afc7ff",fontWeight:"500"},onClick:function(){O.api.exportDataAsCsv()},children:Object(g.jsxs)(o.O,{children:[Object(g.jsx)(o.j,{sm:"3",children:Object(g.jsx)(o.A,{src:"img/icons/mis-envios/exportar.svg",fluid:!0,style:{width:"25px",cursor:"pointer"}})}),Object(g.jsx)(o.j,{className:"export_button",children:"Exportar"})]})})})]})]})]}),Object(g.jsx)(o.O,{className:"table-container",children:Object(g.jsx)(o.j,{children:Object(g.jsxs)("select",{id:"page-size",className:"card-input",onChange:function(){return function(){var e=document.getElementById("page-size").value;O.api.paginationSetPageSize(Number(e)),h(e)}()},style:{background:"white",border:"0px",color:"#768192",marginLeft:"1rem",padding:".5rem",borderRadius:"5px"},value:f,children:[Object(g.jsx)("option",{value:"20",children:"20"}),Object(g.jsx)("option",{value:"50",children:"50"}),Object(g.jsx)("option",{value:"100",children:"100"}),Object(g.jsx)("option",{value:"1000",children:"All"})]})})}),Object(g.jsx)(o.O,{className:"table-container",style:{marginBottom:"2rem"},children:Object(g.jsx)(o.j,{sm:"12",children:Object(g.jsx)("div",{id:"myGrid",style:{height:"600px"},className:"ag-theme-material",children:Object(g.jsx)(u.AgGridReact,{reactUi:"true",className:"ag-theme-material",animateRows:"true",columnDefs:ce.columnDefs,rowData:ce.rowData,rowSelection:"multiple",groupSelectsChildren:"true",suppressRowClickSelection:"true",onGridReady:function(e){y({api:e.api,column_api:e.columnApi}),(!r.isMobile||t>992)&&e.api.sizeColumnsToFit()},frameworkComponents:{btnCellRenderer:v,btnCellRendererDescargar:x,idBtnCellRenderer:k},pagination:!0,paginationPageSize:10,defaultColDef:ce.defaultColDef})})})})]})}):Object(g.jsx)(g.Fragment,{})}}}]);
//# sourceMappingURL=28.1f7bb366.chunk.js.map